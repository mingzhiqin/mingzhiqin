(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"3df0":function(t,a,e){"use strict";(function(t){e("8040"),e("921b");o(e("66fd"));var a=o(e("9675"));function o(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},"46ef":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e="",o=0,n={data:function(){return{maskState:0,desc:"",payType:1,addressData:{},goodsData:[],price:0,number:1}},onLoad:function(a){var n=new Map;n.set(1,"aaa"),this.goodsData=JSON.parse(decodeURIComponent(a.orders)),a.price>0?(this.price=a.price,o=this.price):o=this.goodsData[0].price,console.log(this.goodsData),console.log(this.price),console.log(o),console.log(n),e=t.getStorageSync("token"),this.loadadr()},methods:{loadadr:function(){var a=this;t.request({url:this.$url+"/user/address/all",data:{},method:"POST",header:{"content-type":"application/json",token:e},success:function(t){console.log(t.data),200==t.data.code&&(a.addressData=t.data.data[0])}})},toggleMask:function(t){var a=this,e="show"===t?10:300,o="show"===t?1:0;this.maskState=2,setTimeout(function(){a.maskState=o},e)},numberChange:function(t){this.number=t.number},changePayType:function(t){this.payType=t},submit:function(){this.createOrder()},initGoods:function(){for(var t=[],a=0;a<this.goodsData.length;a++){var e={};e=this.price>0?{goodsId:this.goodsData[a].id,number:this.goodsData[a].number}:{goodsId:this.goodsData[a].id,number:1},t.push(e)}return t},createOrder:function(){var a=this,o=this.initGoods();console.log(o),t.request({url:this.$url+"/order/add",data:{addressId:a.addressData.id,goods:o},method:"POST",header:{"content-type":"application/json",token:e},success:function(t){console.log(t.data),200==t.data.code&&a.payOrder(t.data.data)}})},payOrder:function(a){console.log(a),t.request({url:this.$url+"/order/pay/"+a,data:{},method:"POST",header:{"content-type":"application/json",token:e},success:function(a){console.log(a.data),200==a.data.code&&t.requestPayment({timeStamp:a.data.data.timeStamp,nonceStr:a.data.data.nonceStr,package:a.data.data.packageValue,signType:a.data.data.signType,paySign:a.data.data.paySign,success:function(a){t.navigateTo({url:"/pages/money/paySuccess"})},fail:function(t){}})}})}}};a.default=n}).call(this,e("543d")["default"])},"77ce":function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement;t._self._c},n=[];e.d(a,"a",function(){return o}),e.d(a,"b",function(){return n})},"8cae":function(t,a,e){"use strict";var o=e("ea20"),n=e.n(o);n.a},9675:function(t,a,e){"use strict";e.r(a);var o=e("77ce"),n=e("d1e2");for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);e("8cae");var r=e("2877"),d=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,null,null);a["default"]=d.exports},d1e2:function(t,a,e){"use strict";e.r(a);var o=e("46ef"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(a,t,function(){return o[t]})}(s);a["default"]=n.a},ea20:function(t,a,e){}},[["3df0","common/runtime","common/vendor"]]]);